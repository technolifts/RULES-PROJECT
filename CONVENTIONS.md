I'm building a document management system called DocSecure with:
- Next.js frontend (App Router) with React and TypeScript 
- Python FastAPI backend
- PostgreSQL database

Please help me implement a working system that allows:
1. User registration and login
2. Document upload, storage, and retrieval
3. Document sharing with permission controls
4. Basic document preview
5. Audit logging of user actions

Focus on getting a working implementation first. Let's follow test-driven development practices by writing tests before implementation.